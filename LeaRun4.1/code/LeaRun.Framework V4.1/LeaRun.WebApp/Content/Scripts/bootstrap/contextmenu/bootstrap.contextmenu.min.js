!function(t){"use strict";var e=function(e,n){this.$elements=t(e);this.options=n;this.before=this.options.before||this.before;this.onItem=this.options.onItem||this.onItem;if(this.options.target)this.$elements.attr("data-target",this.options.target);this.listen()};e.prototype={constructor:e,show:function(e){var n=t(this),o,i,s;if(n.is(".disabled, :disabled"))return;s=t.Event("context");if(!this.before.call(this,e,t(e.currentTarget)))return;this.$elements.trigger(s);o=this.getMenu();var r=this.getPosition(e,o);o.attr("style","").css(r).addClass("open");return false},closemenu:function(t){this.getMenu().removeClass("open")},before:function(t){return true},onItem:function(t,e){return true},listen:function(){var e=this;this.$elements.on("contextmenu.context.data-api",t.proxy(this.show,this));t("html").on("click.context.data-api",t.proxy(this.closemenu,this));var n=t(this.$elements.attr("data-target"));n.on("click.context.data-api",function(n){e.onItem.call(this,n,t(n.target))});t("html").on("click.context.data-api",function(t){if(!t.ctrlKey){n.removeClass("open")}})},getMenu:function(){var e=this.$elements.attr("data-target"),n;if(!e){e=this.$elements.attr("href");e=e&&e.replace(/.*(?=#[^\s]*$)/,"")}n=t(e);return n},getPosition:function(e,n){var o=e.clientX,i=e.clientY,s=t(window).width(),r=t(window).height(),a=n.find(".dropdown-menu").outerWidth(),c=n.find(".dropdown-menu").outerHeight(),u={position:"fixed"},h,f;if(i+c>r){h={top:i-c}}else{h={top:i}}if(o+a>s&&o-a>0){f={left:o-a}}else{f={left:o}}return t.extend(u,h,f)},clearMenus:function(e){if(!e.ctrlKey){t("[data-toggle=context]").each(function(){this.getMenu().removeClass("open")})}}};t.fn.contextmenu=function(t,n){var o=this;return function(){var i=o.data("context"),s=typeof t=="object"&&t;if(!i)o.data("context",i=new e(o,s));if(typeof t=="string")i[t].call(i,n)}()};t.fn.contextmenu.Constructor=e;t(document).on("contextmenu.context.data-api","[data-toggle=context]",function(e){t(this).contextmenu("show",e);e.preventDefault()})}(window.jQuery);