(function(b){var a;b.fn.imglazyload=function(c){var e=Array.prototype.splice,c=b.extend({threshold:0,container:window,urlName:"data-url",placeHolder:"",eventName:"scrollStop",refresh:false,innerScroll:false,isVertical:true,startload:null},c),h=b(c.container),j=c.isVertical,d=b.isWindow(h.get(0)),f={win:[j?"scrollY":"scrollX",j?"innerHeight":"innerWidth"],img:[j?"top":"left",j?"height":"width"]};!d&&(f.win=f.img);function k(o){var n=d?window:h.offset(),l=n[f.win[0]],m=n[f.win[1]];return l>=o[f.img[0]]-c.threshold-m&&l<=o[f.img[0]]+o[f.img[1]]}a=b.slice(this).reverse();if(c.refresh){return this}function i(n){var l=b(n),m;b.isFunction(c.startload)&&c.startload.call(l);m=b("<img />").on("load",function(){l.replaceWith(m).trigger("loadcomplete");m.off("load")}).on("error",function(){var o=b.Event("error");l.trigger(o);o.defaultPrevented||a.push(n);m.off("error").remove()}).attr("src",l.attr(c.urlName))}function g(){var l,m,n,o;for(l=a.length;l--;){m=b(o=a[l]);n=m.offset();k(n)&&(e.call(a,l,1),i(o))}}b(document).ready(function(){c.placeHolder&&b(a).append(c.placeHolder);g()});!c.innerScroll&&b(window).on(c.eventName+" ortchange",function(){g()});b.fn.imglazyload.detect=g;return this}})(Zepto);