(function(a,b){a.ui.define("add2desktop",{_data:{icon:"",container:"",key:"_gmu_adddesktop_key",useFix:true,position:{bottom:12,left:"50%"},beforeshow:function(c){this.key()&&c.preventDefault()},afterhide:function(){this.key(1)},_isShow:false},_create:function(){var e=this,d=(e.root()||e.root(a("<div></div>"))).addClass("ui-add2desktop").appendTo(e.data("container")||(e.root().parent().length?"":document.body)),c=(a.os.version&&a.os.version.substr(0,3)>4.1?"new":"old");d.html('<img src="'+e.data("icon")+'"/><p>\u5148\u70b9\u51fb<span class="ui-add2desktop-icon-'+c+'"></span>\uff0c<br />\u518d"\u6dfb\u52a0\u81f3\u4e3b\u5c4f\u5e55"</p><span class="ui-add2desktop-close"><b></b></span><div class="ui-add2desktop-arrow"><b></b></div>')},_setup:function(f){var d=this,c=d.root();if(!f){var e=c.children("img").attr("src");e&&d.data("icon",e);d._create()}return d},_init:function(){var c=this;c.root().find(".ui-add2desktop-close").on("click",function(){c.hide()});c.data("useFix")&&c.root().fix(c.data("position"));return c.show()},key:function(d){var c=window.localStorage;return d!==b?c.setItem(this.data("key"),d):c.getItem(this.data("key"))},show:function(){var d=this;if(!d.data("_isShow")){if(!a.os.ios||a.browser.uc||a.browser.qq||a.browser.chrome){return d}var c=a.Event("beforeshow");d.trigger(c);if(c.defaultPrevented){return d}d.root().css("display","block");d.data("_isShow",true)}return d},hide:function(){var c=this;if(c.data("_isShow")){c.root().css("display","none");c.data("_isShow",false);c.trigger("afterhide")}return c}})})(Zepto);