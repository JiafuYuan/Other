(function(a){a.ui.define("quickdelete",{_data:{size:20,offset:{x:0,y:0}},_create:function(){var d=this,h=d.data("input",a(d.data("container"))),g=+new Date(),f="ui-input-mask-"+g,e="ui-quickdelete-delete-"+g,c=h.parent(),b=a('<div id="'+e+'" class="ui-quickdelete-button"></div>').css({height:d.data("size"),width:d.data("size")});a.os.android&&a.os.android&&parseFloat(a.os.version).toFixed(1)==2.1&&b.css("-webkit-background-size","20px 20px");if(c.attr("class")!="ui-input-mask"){c=a('<div id="'+f+'" class="ui-input-mask"></div>').appendTo(h.parent()).append(h)}d.root(c.append(d.data("deleteElem",b)).css("height",h.height()));d._initButtonOffset()},_setup:function(){var b=this;b.data("container",b.root());this._create()},_init:function(){var c=this,d=c.data("input"),b=a.proxy(c._eventHandler,c);d.on("focus input blur",b);c.data("deleteElem").on("touchstart",b);c.on("destroy",function(){d.off("focus input blur",b);c.data("deleteElem").off("touchstart",b);b=a.fn.emptyFn});c.trigger("init")},_show:function(){this.data("deleteElem").css("visibility","visible");return this},_hide:function(){this.data("deleteElem").css("visibility","hidden");return this},_eventHandler:function(f){var c=this,b=f.type,d=f.target,g=c.data("input");switch(b){case"focus":case"input":a.trim(g.val())?c._show():c._hide();break;case"mousedown":case"touchstart":if(d==c.data("deleteElem").get(0)){f.preventDefault();f.formDelete=true;g.val("");c._hide().trigger("delete");g.blur().focus()}break;case"blur":c._hide();break}},_initButtonOffset:function(){var e=this,i=e.data("input"),d=e.data("size"),g=e.root().offset(),f=e.data("offset"),b=f.x||0,h=f.y||0,c=Math.round((g.height-2*h-d)/2);e.data("deleteElem").css({padding:c<0?0:c,top:h,right:b});i.css({position:"absolute",top:0,left:0,width:"auto",right:d+20});return e}})})(Zepto);