(function(b,c){var d=/\bui\-icon\-(\w+)\b/ig,a=/\bui\-button\-icon\-pos\-(\w+)\b/ig;b.ui.define("button",{_data:{disabled:false,selected:false,label:"",alttext:"",type:"button",icon:"",iconpos:"",attributes:null,container:null},_createDefEL:function(){return b("<button>")},_prepareBtnEL:function(e){return this.root()},_prepareDom:function(h){var g=this._data,f=this.root(),e;if(h=="create"){(g.label||g.alttext)&&(g._textSpan=b('<span class="ui-button-text">'+(g.label||g.alttext)+"</span>").appendTo(g._buttonElement));g.icon&&(g._iconSpan=b('<span class="ui-icon ui-icon-'+g.icon+'"></span>').appendTo(g._buttonElement))}else{if(h=="fullsetup"){g._textSpan=b(".ui-button-text",g._buttonElement);e=g._buttonElement.hasClass("ui-button-icon-only")?"alttext":"label";g[e]=g[e]||g._textSpan.text();g._iconSpan=b(".ui-icon",g._buttonElement);g.icon=g.icon||g._iconSpan.attr("class").match(d)&&RegExp.$1;g.iconpos=g.iconpos||g._buttonElement.attr("class").match(a)&&RegExp.$1}else{g.label=g.label||g._buttonElement.text()||f.val();g.alttext=g.alttext||f.attr("data-alttext");g.icon=g.icon||f.attr("data-icon");g.iconpos=g.iconpos||f.attr("data-iconpos");g._buttonElement.empty();g.icon&&(g._iconSpan=b('<span class="ui-icon ui-icon-'+g.icon+'"></span>').appendTo(g._buttonElement));(g.label||g.alttext)&&(g._textSpan=b('<span class="ui-button-text">'+(g.label||g.alttext)+"</span>").appendTo(g._buttonElement))}}},_create:function(){var f=this,e,g=f._data;!g.icon&&!g.label&&(g.label="\u6309\u94ae");e=f._el||(f.root(f._createDefEL()));g._buttonElement=f._prepareBtnEL("create");f._prepareDom("create");e.appendTo(g._container=b(g.container||"body"));g._buttonElement!==e&&g._buttonElement.insertAfter(e)},_detectType:function(){return"button"},_setup:function(g){var e=this,f=e._data;g=g?"fullsetup":"setup";f.type=e._detectType();f._buttonElement=e._prepareBtnEL(g);e._prepareDom(g)},_prepareClassName:function(){var f=this,g=f._data,e="ui-button";e+=g.label&&g.icon?" ui-button-text-icon ui-button-icon-pos-"+(g.iconpos||"left"):g.label?" ui-button-text-only":" ui-button-icon-only";e+=g.disabled?" ui-state-disable":"";e+=g.selected?" ui-state-active":"";return e},_init:function(){var g=this,e=g.root(),h=g._data,f=g._prepareClassName();h.attributes&&e.attr(h.attributes);e.prop("disabled",!!h.disabled);h._buttonElement.addClass(f).highlight(h.disabled?"":"ui-state-hover");h._buttonElement.on("click",b.proxy(g._eventHandler,g));b.each(["click","change"],function(){h[this]&&g.on(this,h[this]);delete h[this]})},_eventHandler:function(e){var f=this._data;if(f.disabled){e.preventDefault();e.stopImmediatePropagation()}},_setState:function(e){var f=this._data,g=f.disabled!=!e;if(g){f.disabled=!e;f._buttonElement[e?"removeClass":"addClass"]("ui-state-disable").highlight(e?"ui-state-hover":"");this.trigger("statechange",e)}return this},enable:function(){return this._setState(true)},disable:function(){return this._setState(false)},toggleEnable:function(){var e=this._data;return this._setState(e.disabled)},_setSelected:function(f){var e=this._data;if(e.selected!=f){e._buttonElement[(e.selected=f)?"addClass":"removeClass"]("ui-state-active");this.trigger("change")}return this},select:function(){return this._setSelected(true)},unselect:function(){return this._setSelected(false)},toggleSelect:function(){return this._setSelected(!this._data.selected)},destroy:function(){var e=this,f=this._data;f._buttonElement.off("click",e._eventHandler).highlight();f._buttonElement.remove();e.$super("destroy")}})})(Zepto);